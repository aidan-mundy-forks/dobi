<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Config Reference &mdash; dobi 0.8 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="dobi 0.8 documentation" href="index.html" />
    <link rel="next" title="Config Variables" href="variables.html" />
    <link rel="prev" title="Examples" href="examples.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="config-reference">
<h1>Config Reference<a class="headerlink" href="#config-reference" title="Permalink to this headline">¶</a></h1>
<p>Every section in a <code class="file docutils literal"><span class="pre">dobi.yaml</span></code> configuration file defines a resource (with the
exception of <a class="reference internal" href="#meta">meta</a>, which is configuration for <strong>dobi</strong>).</p>
<p>Each section in the file has the following form:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">type=name</span><span class="p">:</span>
    <span class="nt">field</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">value</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>Each resource must be one of the following resource types:</p>
<div class="section" id="image">
<h2>image<a class="headerlink" href="#image" title="Permalink to this headline">¶</a></h2>
<p>An <strong>image</strong> resource provides actions for working with a Docker
image. If an image is buildable it is considered up-to-date if all files in
the build context have a modified time older than the created time of the
image. If using inline Dockerfile, the <strong>dobi.yaml</strong> file will be considered
as a part of the build context.</p>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>An image with build args:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">image=project-dev</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">myproject-dev</span>
    <span class="nt">context</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">args</span><span class="p">:</span>
      <span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3.1.4&#39;</span>
      <span class="nt">url</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">http://example.com/foo</span>
</pre></div>
</div>
<p><strong>image</strong>  (required)</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The name of the <strong>image</strong> without a tag. Tags must be specified    in the <strong>tags</strong> field. This field supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>dockerfile</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The path to the <code class="docutils literal"><span class="pre">Dockerfile</span></code> used to build the image. This    path is relative to <code class="docutils literal"><span class="pre">context</span></code>. Can not be used with <code class="docutils literal"><span class="pre">steps</span></code></p>
</div></blockquote>
<p><strong>steps</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>An inline Dockerfile used to build  the image. <code class="docutils literal"><span class="pre">steps</span></code> can not    be used with the <code class="docutils literal"><span class="pre">dockerfile</span></code> field.</p>
</div></blockquote>
<p><strong>context</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><code class="docutils literal"><span class="pre">.</span></code></td>
</tr>
</tbody>
</table>
<p>The build context used to build the image.</p>
</div></blockquote>
<p><strong>args</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">mapping <code class="docutils literal"><span class="pre">key:</span> <span class="pre">value</span></code></td>
</tr>
</tbody>
</table>
<p>Build args used to build the image. Values in the mapping support    <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>target</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The target stage to build in a multi-stage Dockerfile. Defaults to    the last stage.</p>
</div></blockquote>
<p><strong>pull-base-image-on-build</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p>If <strong>true</strong> the base image used in the    <code class="docutils literal"><span class="pre">Dockerfile</span></code> will be pulled before building the image.</p>
</div></blockquote>
<p><strong>pull</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><code class="docutils literal"><span class="pre">always</span></code></td>
</tr>
</tbody>
</table>
<p>Pull an image instead of building it. The value may be one of:    * <code class="docutils literal"><span class="pre">once</span></code> - only pull if the image:tag does not exist    * <code class="docutils literal"><span class="pre">always</span></code> - always pull the image    * <code class="docutils literal"><span class="pre">never</span></code> - don&#8217;t pull or build the image. Use one that is already present locally    * <code class="docutils literal"><span class="pre">&lt;duration&gt;</span></code> - pull if the image hasn&#8217;t been pulled in at least      <code class="docutils literal"><span class="pre">duration</span></code>. The format of duration is a number followed by a single      character time unit (ex: <code class="docutils literal"><span class="pre">40s</span></code>, <code class="docutils literal"><span class="pre">2h</span></code>, <code class="docutils literal"><span class="pre">30min</span></code>)</p>
</div></blockquote>
<p><strong>tags</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of tags</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><code class="docutils literal"><span class="pre">['{unique}']</span></code></td>
</tr>
</tbody>
</table>
<p>The image tags applied to the image before pushing the image to a    registry.  The first tag in the list is used when the image is built.    Each item in the list supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>network-mode</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The network mode to use for each step in the Dockerfile.</p>
</div></blockquote>
<p><strong>cache-from</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>A list of images to use as the cache for a build.</p>
</div></blockquote>
<p><strong>depends</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of tasks</td>
</tr>
</tbody>
</table>
<p>The list of task dependencies.</p>
</div></blockquote>
<p><strong>description</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>of a resource    Deprecated use Annotations.Description</p>
</div></blockquote>
<p><strong>annotations</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">AnnotationFields</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="job">
<h2>job<a class="headerlink" href="#job" title="Permalink to this headline">¶</a></h2>
<p>A <strong>job</strong> resource uses an <a class="reference internal" href="#image">image</a> to run a job in a container.</p>
<p>A <strong>job</strong> resource that doesn&#8217;t have an <code class="docutils literal"><span class="pre">artifact</span></code> is never considered
up-to-date and will always run.  If a job resource has an <code class="docutils literal"><span class="pre">artifact</span></code>
the job will be skipped if the artifact is newer than the source.
The last modified time of the <code class="docutils literal"><span class="pre">artifact</span></code> files is compared against the
last modified time of the files in <code class="docutils literal"><span class="pre">sources</span></code>, or if <code class="docutils literal"><span class="pre">sources</span></code> is left
unset, the last modified time of the <code class="docutils literal"><span class="pre">use</span></code> image and all the files in
the <code class="docutils literal"><span class="pre">mounts</span></code>.</p>
<p><code class="docutils literal"><span class="pre">mounts</span></code> are provided to the container as bind mounts. If the <code class="docutils literal"><span class="pre">DOBI_NO_BIND_MOUNT</span></code>
environment variable, or <cite>&#8211;no-build-mount</cite> flag is set, then <code class="docutils literal"><span class="pre">mounts</span></code>
will be copied into the container, and all artifacts will be copied out of the
container to the host after the job is complete.</p>
<p>The <a class="reference internal" href="#image">image</a> specified in <code class="docutils literal"><span class="pre">use</span></code> and any <a class="reference internal" href="#mount">mount</a> resources listed in
<code class="docutils literal"><span class="pre">mounts</span></code> are automatically added as dependencies and will always be
created first.</p>
<div class="section" id="id1">
<h3>Example<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Run a container using the <code class="docutils literal"><span class="pre">builder</span></code> image to compile some source
code to <code class="docutils literal"><span class="pre">./dist/app-binary</span></code>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">job=compile</span><span class="p">:</span>
    <span class="nt">use</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">builder</span>
    <span class="nt">mounts</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">source</span><span class="p p-Indicator">,</span> <span class="nv">dist</span><span class="p p-Indicator">]</span>
    <span class="nt">artifact</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dist/app-binary</span>
</pre></div>
</div>
<p><strong>use</strong>  (required)</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The name of an <a class="reference internal" href="#image">image</a> resource. The referenced image is used    to created the container for the <strong>job</strong>.</p>
</div></blockquote>
<p><strong>artifact</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of file paths or glob patterns</td>
</tr>
</tbody>
</table>
<p>File paths or globs identifying the files created by the <strong>job</strong>.    Paths to directories must end with a path separator (<code class="docutils literal"><span class="pre">/</span></code>).    Paths are relative to the <code class="docutils literal"><span class="pre">dobi.yaml</span></code></p>
</div></blockquote>
<p><strong>command</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">shell quoted string</td>
</tr>
</tbody>
</table>
<p>The command to run in the container.</p>
<p><code class="docutils literal"><span class="pre">&quot;bash</span> <span class="pre">-c</span> <span class="pre">'echo</span> <span class="pre">something'&quot;</span></code></p>
</div></blockquote>
<p><strong>entrypoint</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">shell quoted string</td>
</tr>
</tbody>
</table>
<p>Override the image entrypoint</p>
</div></blockquote>
<p><strong>sources</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of file paths or glob patterns</td>
</tr>
</tbody>
</table>
<p>File paths or globs of the files used to create the    artifact. The modified time of these files are compared to the modified time    of the artifact to determine if the <strong>job</strong> is stale. If the <strong>sources</strong>    list is defined the modified time of <strong>mounts</strong> and the <strong>use</strong> image are    ignored.</p>
</div></blockquote>
<p><strong>mounts</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of mount resources</td>
</tr>
</tbody>
</table>
<p>A list of <a class="reference internal" href="#mount">mount</a> resources to use when creating the container.</p>
</div></blockquote>
<p><strong>privileged</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p>Gives extended privileges to the container</p>
</div></blockquote>
<p><strong>interactive</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p>Makes the container interative and enables a tty.</p>
</div></blockquote>
<p><strong>env</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of <code class="docutils literal"><span class="pre">key=value</span></code> strings</td>
</tr>
</tbody>
</table>
<p>Environment variables to pass to the container. This field    supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>provide-docker</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p>Exposes the docker engine to the container by either    mounting the unix socket or setting the <code class="docutils literal"><span class="pre">DOCKER_HOST</span></code> environment    variable. All environment variables with a  <code class="docutils literal"><span class="pre">DOCKER_</span></code> prefix in the    environment are set on the container.</p>
</div></blockquote>
<p><strong>net-mode</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The network mode to use. This field supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>working-dir</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The directory to set as the active working directory in the    container. This field supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>user</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>Username or UID to use in the container. Format <code class="docutils literal"><span class="pre">user[:group]</span></code>.</p>
</div></blockquote>
<p><strong>ports</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of &#8216;host_port:container_port&#8217;</td>
</tr>
</tbody>
</table>
<p>Publish ports to the host</p>
</div></blockquote>
<p><strong>devices</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of device specs</td>
</tr>
</tbody>
</table>
<p>Maps the host devices you want to connect to a container</p>
<p><code class="docutils literal"><span class="pre">{Host:</span> <span class="pre">/dev/fb0,</span> <span class="pre">Container:</span> <span class="pre">/dev/fb0,</span> <span class="pre">Permissions:</span> <span class="pre">rwm}</span></code></p>
</div></blockquote>
<p><strong>labels</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">map of string keys to string values</td>
</tr>
</tbody>
</table>
<p>sets the labels of the running job container</p>
</div></blockquote>
<p><strong>depends</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of tasks</td>
</tr>
</tbody>
</table>
<p>The list of task dependencies.</p>
</div></blockquote>
<p><strong>description</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>of a resource    Deprecated use Annotations.Description</p>
</div></blockquote>
<p><strong>annotations</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">AnnotationFields</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="mount">
<h2>mount<a class="headerlink" href="#mount" title="Permalink to this headline">¶</a></h2>
<p>A <strong>mount</strong> resource creates a host bind mount or named volume
mount.</p>
<div class="section" id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>A mount named <code class="docutils literal"><span class="pre">source</span></code> that mounts the current host directory as
<code class="docutils literal"><span class="pre">/app/code</span></code> in the container.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">mount=source</span><span class="p">:</span>
    <span class="nt">bind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app/code</span>

<span class="nt">mount=named</span><span class="p">:</span>
    <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">app-data</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/data</span>
</pre></div>
</div>
<p><strong>bind</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The host path to create and mount. This field supports expansion of    <cite>~</cite> to the current users home directory.</p>
</div></blockquote>
<p><strong>path</strong>  (required)</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The container path of the mount</p>
</div></blockquote>
<p><strong>name</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The name of a named volume</p>
</div></blockquote>
<p><strong>read-only</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p>Set the mount to be read-only</p>
</div></blockquote>
<p><strong>file</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">bool</td>
</tr>
</tbody>
</table>
<p>When true create an empty file instead of a directory</p>
</div></blockquote>
<p><strong>mode</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">int</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><code class="docutils literal"><span class="pre">0755</span></code> <em>(for directories)</em>, <code class="docutils literal"><span class="pre">0644</span></code> <em>(for files)</em></td>
</tr>
</tbody>
</table>
<p>The file mode to set on the host file or directory when it is    created.</p>
</div></blockquote>
<p><strong>description</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>of a resource    Deprecated use Annotations.Description</p>
</div></blockquote>
<p><strong>annotations</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">AnnotationFields</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="alias">
<h2>alias<a class="headerlink" href="#alias" title="Permalink to this headline">¶</a></h2>
<p>An <strong>alias</strong> resource is a list of other tasks which will be run
in the order they are listed.</p>
<div class="section" id="id3">
<h3>Example<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>An alias that runs three other tasks:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">alias=test</span>
    <span class="l l-Scalar l-Scalar-Plain">tasks</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="nv">test-unit</span><span class="p p-Indicator">,</span> <span class="nv">test-integration</span><span class="p p-Indicator">,</span> <span class="nv">test-acceptance</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>tasks</strong>  (required)</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of tasks</td>
</tr>
</tbody>
</table>
<p>The list of tasks</p>
</div></blockquote>
<p><strong>description</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>of a resource    Deprecated use Annotations.Description</p>
</div></blockquote>
<p><strong>annotations</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">AnnotationFields</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="compose">
<h2>compose<a class="headerlink" href="#compose" title="Permalink to this headline">¶</a></h2>
<p>A <strong>compose</strong> resource runs <code class="docutils literal"><span class="pre">docker-compose</span></code> to create an
isolated environment. The <strong>compose</strong> resource keeps containers running
until <strong>dobi</strong> exits so the containers can be used by other tasks that depend
on the <strong>compose</strong> resource, or are listed after it in an <a class="reference internal" href="#alias">alias</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference external" href="https://github.com/docker/compose">Docker Compose</a> must be installed
and available in <code class="docutils literal"><span class="pre">$PATH</span></code> to use this resource.</p>
</div>
<div class="section" id="id4">
<h3>Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Start a Compose environment setting the project name to <code class="docutils literal"><span class="pre">web-devenv</span></code>
and using two Compose files.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">compose=devenv</span><span class="p">:</span>
    <span class="nt">files</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">docker-compose.yml</span><span class="p p-Indicator">,</span> <span class="nv">docker-compose-dev.yml</span><span class="p p-Indicator">]</span>
    <span class="nt">project</span><span class="p">:</span> <span class="s">&#39;web-devenv&#39;</span>
</pre></div>
</div>
<p><strong>files</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of filenames</td>
</tr>
</tbody>
</table>
<p>The Compose files to use. This field supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>project</strong>  (required)</p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The project name used by Compose. This field supports    <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>.</p>
</div></blockquote>
<p><strong>stop-grace</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">int</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><code class="docutils literal"><span class="pre">5</span></code></td>
</tr>
</tbody>
</table>
<p>Seconds to wait for containers to stop before killing them.</p>
</div></blockquote>
<p><strong>depends</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of tasks</td>
</tr>
</tbody>
</table>
<p>The list of task dependencies.</p>
</div></blockquote>
<p><strong>description</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>of a resource    Deprecated use Annotations.Description</p>
</div></blockquote>
<p><strong>annotations</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">AnnotationFields</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="env">
<h2>env<a class="headerlink" href="#env" title="Permalink to this headline">¶</a></h2>
<p>An <strong>env</strong> resource provides environment variables to <strong>job</strong> and
<strong>compose</strong> resources.</p>
<div class="section" id="id5">
<h3>Example<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Define some variables for a <code class="docutils literal"><span class="pre">job</span></code></p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">env=settings</span><span class="p">:</span>
    <span class="nt">files</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">local.env</span><span class="p p-Indicator">]</span>
    <span class="nt">variables</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">PORT=3838</span><span class="p p-Indicator">,</span> <span class="nv">HOST=stage</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p><strong>files</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of filenames</td>
</tr>
</tbody>
</table>
<p>List of files which contain environment variables</p>
</div></blockquote>
<p><strong>variables</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of environment variables</td>
</tr>
</tbody>
</table>
<p>List of environment variable <code class="docutils literal"><span class="pre">key=value</span></code> pairs</p>
</div></blockquote>
<p><strong>description</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>of a resource    Deprecated use Annotations.Description</p>
</div></blockquote>
<p><strong>annotations</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">AnnotationFields</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
<div class="section" id="meta">
<h2>meta<a class="headerlink" href="#meta" title="Permalink to this headline">¶</a></h2>
<p>Configure <strong>dobi</strong> and include other config files.</p>
<div class="section" id="id6">
<h3>Example<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Set the the project name to <code class="docutils literal"><span class="pre">mywebapp</span></code> and run the <code class="docutils literal"><span class="pre">all</span></code> task by
default.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span></span><span class="nt">meta</span><span class="p">:</span>
    <span class="nt">project</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">mywebapp</span>
    <span class="nt">default</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all</span>
</pre></div>
</div>
<p><strong>default</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
<p>The name of a task from the <code class="docutils literal"><span class="pre">dobi.yml</span></code> to run when no    task name is specified on the command line.</p>
</div></blockquote>
<p><strong>project</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><em>basename of ``dobi.yml``</em></td>
</tr>
</tbody>
</table>
<p>The name of the project. Used to create unique identifiers for    image tags and container names.</p>
</div></blockquote>
<p><strong>include</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">list of file paths or glob patterns</td>
</tr>
</tbody>
</table>
<p>A list of dobi configuration files to include. Paths are    relative to the current working directory. Includs can be partial    configs that depend on resources in any of the other included files.</p>
</div></blockquote>
<p><strong>exec-id</strong></p>
<blockquote>
<div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body">string</td>
</tr>
<tr class="field-even field"><th class="field-name">default:</th><td class="field-body"><code class="docutils literal"><span class="pre">{user.name}</span></code></td>
</tr>
</tbody>
</table>
<p>A template value used as part of unique identifiers for image tags    and container names. This field supports <a class="reference internal" href="variables.html"><span class="doc">Config Variables</span></a>. This value can    be overridden with the <code class="docutils literal"><span class="pre">$DOBI_EXEC_ID</span></code> environment variable.</p>
</div></blockquote>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">dobi</a></h1>



<p class="blurb">A build automation tool for Docker applications</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=dnephin&repo=dobi&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Config Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#image">image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#job">job</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mount">mount</a></li>
<li class="toctree-l2"><a class="reference internal" href="#alias">alias</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compose">compose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#env">env</a></li>
<li class="toctree-l2"><a class="reference internal" href="#meta">meta</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Config Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Tasks</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="examples.html" title="previous chapter">Examples</a></li>
      <li>Next: <a href="variables.html" title="next chapter">Config Variables</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/config.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/dnephin/dobi" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>